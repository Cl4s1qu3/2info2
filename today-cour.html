<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2 Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ 2 - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø´ØªØ±Ùƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        /* Ø§Ù„Ø±Ø£Ø³ */
        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid #1e3c72;
            position: relative;
        }

        .header h1 {
            color: #333;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .header h1 .class-number {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 2.5rem;
            margin-left: 10px;
        }

        .live-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff416c;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */
        .system-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .online-count {
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
        }

        /* Ø²Ø± Ø§Ù„Ù…Ø¯ÙŠØ± */
        .admin-btn {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px auto;
            transition: all 0.3s;
        }

        .admin-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 65, 108, 0.3);
        }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± */
        .admin-panel {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            display: none;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
        }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ø¯Ø±ÙˆØ³ */
        .courses-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .course-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .course-card:hover {
            border-color: #1e3c72;
            box-shadow: 0 10px 30px rgba(30, 60, 114, 0.2);
            transform: translateY(-5px);
        }

        .course-card.new {
            border-color: #28a745;
            animation: newCourse 1s ease;
        }

        @keyframes newCourse {
            0% { transform: scale(0.95); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .course-title {
            font-size: 1.2rem;
            color: #333;
            font-weight: bold;
            flex: 1;
        }

        .course-time {
            background: #1e3c72;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
            white-space: nowrap;
        }

        .course-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
            min-height: 60px;
        }

        .course-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #888;
            font-size: 0.85rem;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ±ÙˆØª */
        .course-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .course-card:hover .course-actions {
            opacity: 1;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .action-btn:hover {
            transform: scale(1.1);
        }

        .edit-btn {
            background: #17a2b8;
            color: white;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        /* Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© */
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #666;
            grid-column: 1 / -1;
        }

        .empty-state i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 15px;
        }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            max-width: 350px;
            animation: slideInRight 0.5s ease;
            border-right: 5px solid #1e3c72;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Ù…ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header h1 .class-number {
                font-size: 2rem;
                padding: 8px 15px;
            }
            
            .courses-container {
                grid-template-columns: 1fr;
            }
            
            .system-info {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
    <div class="notification" id="notification"></div>

    <div class="container">
        <!-- Ø§Ù„Ø±Ø£Ø³ -->
        <div class="header">
            <h1>
                <span class="class-number">2</span>
                Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ 2 - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø´ØªØ±Ùƒ
            </h1>
            <p>Ø£ÙŠ ØªØºÙŠÙŠØ± ÙŠØ¹Ù…Ù„Ù‡ Ø§Ù„Ù…Ø¯ÙŠØ± ÙŠØ¸Ù‡Ø± ÙÙŠ Ù‡ÙˆØ§ØªÙ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙˆØ±Ø§Ù‹</p>
            <div class="live-badge">
                <i class="fas fa-circle"></i> Ù…Ø¨Ø§Ø´Ø±
            </div>
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
        <div class="system-info">
            <div>
                <span id="lastUpdate">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ø¢Ù†</span>
                | 
                <span id="totalCourses">Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³: 0</span>
            </div>
            <div class="online-count">
                <i class="fas fa-users"></i>
                <span id="onlineUsers">0</span> Ù…ØªØµÙ„
            </div>
        </div>

        <!-- Ø²Ø± Ø§Ù„Ù…Ø¯ÙŠØ± -->
        <button class="admin-btn" id="adminLoginBtn" onclick="showAdminLogin()">
            <i class="fas fa-user-shield"></i>
            Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…
        </button>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± -->
        <div class="admin-panel" id="adminPanel">
            <h3 style="margin-bottom: 20px; text-align: center;">
                <i class="fas fa-cogs"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±
            </h3>
            
            <div class="form-group">
                <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³</label>
                <input type="text" id="courseTitle" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³">
            </div>
            
            <div class="form-group">
                <label>ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø³</label>
                <input type="text" id="courseTime" class="form-control" placeholder="Ù…Ø«Ø§Ù„: 8:00 - 10:00">
            </div>
            
            <div class="form-group">
                <label>ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³</label>
                <textarea id="courseDescription" class="form-control" rows="3" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙØ§Ù‹ Ù…ÙØµÙ„Ø§Ù‹ Ù„Ù„Ø¯Ø±Ø³"></textarea>
            </div>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°</label>
                <select id="courseTeacher" class="form-control">
                    <option value="Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯">Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯</option>
                    <option value="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯">Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯</option>
                    <option value="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯">Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯</option>
                    <option value="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ù„ÙŠ">Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ù„ÙŠ</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button class="admin-btn" onclick="saveCourse()" style="flex: 1;">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³
                </button>
                <button class="admin-btn" onclick="logoutAdmin()" style="background: #6c757d; flex: 0.5;">
                    <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </div>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ -->
        <div class="courses-container" id="coursesContainer">
            <!-- Ø§Ù„Ø¯Ø±ÙˆØ³ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
        </div>

        <!-- Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© -->
        <div class="empty-state" id="emptyState">
            <i class="fas fa-book-open"></i>
            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
            <p>Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø£ÙˆÙ„Ù‰</p>
        </div>
    </div>

    <script>
        // ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ====================
        const SYSTEM_CONFIG = {
            GITHUB_USER: '2info2courses',  // Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… GitHub
            REPO_NAME: 'courses-data',     // Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
            BRANCH: 'main',               // Ø§Ù„ÙØ±Ø¹
            FILE_PATH: 'courses.json',    // Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            ADMIN_PASSWORD: 'admin123',   // ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯ÙŠØ±
            UPDATE_INTERVAL: 10000,       // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
            MAX_COURSES: 50               // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¯Ø±ÙˆØ³
        };

        // ==================== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ====================
        let courses = [];
        let isAdmin = false;
        let currentEditId = null;
        let onlineUsers = new Set();
        let lastUpdateTime = Date.now();

        // ==================== ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        function generateUserId() {
            let userId = localStorage.getItem('user_id');
            if (!userId) {
                userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('user_id', userId);
            }
            return userId;
        }

        // ==================== Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± ====================
        function showAdminLogin() {
            const password = prompt("ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…:");
            if (password === SYSTEM_CONFIG.ADMIN_PASSWORD) {
                isAdmin = true;
                document.getElementById('adminPanel').style.display = 'block';
                document.getElementById('adminLoginBtn').style.display = 'none';
                showNotification("âœ… ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…", "success");
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø¶ÙˆØ±
                updatePresence();
            } else if (password) {
                showNotification("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©", "error");
            }
        }

        function logoutAdmin() {
            isAdmin = false;
            currentEditId = null;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminLoginBtn').style.display = 'block';
            clearForm();
            showNotification("ğŸ”“ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬", "info");
        }

        // ==================== Ø­ÙØ¸/ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø±Ø³ ====================
        async function saveCourse() {
            if (!isAdmin) {
                showNotification("âš ï¸ ÙŠØ¬Ø¨ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø£ÙˆÙ„Ø§Ù‹", "warning");
                return;
            }

            const title = document.getElementById('courseTitle').value.trim();
            const time = document.getElementById('courseTime').value.trim();
            const description = document.getElementById('courseDescription').value.trim();
            const teacher = document.getElementById('courseTeacher').value;

            if (!title || !time || !description) {
                showNotification("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„", "warning");
                return;
            }

            const courseData = {
                id: currentEditId || Date.now().toString(),
                title: title,
                time: time,
                description: description,
                teacher: teacher,
                subject: "Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ",
                createdBy: "Ø§Ù„Ù…Ø¯ÙŠØ±",
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                version: 1
            };

            try {
                showNotification("â³ Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³...", "info");

                if (currentEditId) {
                    // ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø±Ø³ Ù…ÙˆØ¬ÙˆØ¯
                    const index = courses.findIndex(c => c.id === currentEditId);
                    if (index !== -1) {
                        courses[index] = courseData;
                        showNotification("âœï¸ ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø±Ø³", "success");
                    }
                    currentEditId = null;
                } else {
                    // Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯
                    if (courses.length >= SYSTEM_CONFIG.MAX_COURSES) {
                        // Ø¥Ø²Ø§Ù„Ø© Ø£Ù‚Ø¯Ù… Ø¯Ø±Ø³ Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Ù†Ø§ Ø§Ù„Ø­Ø¯
                        courses.shift();
                    }
                    courses.push(courseData);
                    showNotification("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯", "success");
                }

                // Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø£ÙˆÙ„Ø§Ù‹
                saveLocalCourses();
                
                // Ø±ÙØ¹ Ø¥Ù„Ù‰ GitHub
                const saved = await saveToGitHub();
                
                if (saved) {
                    showNotification("ğŸš€ ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø¯Ø±Ø³ Ù„Ù„Ø¬Ù…ÙŠØ¹", "success");
                    // Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© "Ø¬Ø¯ÙŠØ¯" Ù…Ø¤Ù‚ØªØ§Ù‹
                    markNewCourse(courseData.id);
                }

                renderCourses();
                clearForm();
                updateLastUpdate();

            } catch (error) {
                console.error('Error saving course:', error);
                showNotification("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸", "error");
            }
        }

        // ==================== Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ GitHub ====================
        async function saveToGitHub() {
            try {
                // Ù†Ø³ØªØ®Ø¯Ù… Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                const backupData = {
                    courses: courses,
                    lastUpdate: new Date().toISOString(),
                    totalCourses: courses.length,
                    updatedBy: isAdmin ? 'admin' : 'user'
                };

                // Ø­ÙØ¸ Ø¹Ù„Ù‰ GitHub Gist (Ù…Ø¬Ø§Ù†ÙŠ)
                const response = await fetch('https://api.github.com/gists', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        description: '2info2 Courses Backup',
                        public: true,
                        files: {
                            'courses.json': {
                                content: JSON.stringify(backupData, null, 2)
                            }
                        }
                    })
                });

                if (response.ok) {
                    const gist = await response.json();
                    // Ø­ÙØ¸ Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ø³Øª Ù…Ø­Ù„ÙŠØ§Ù‹
                    localStorage.setItem('last_gist_id', gist.id);
                    return true;
                }
                return false;

            } catch (error) {
                console.log('GitHub save failed, using local backup:', error);
                return false;
            }
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub ====================
        async function loadFromGitHub() {
            try {
                showNotification("ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¯Ø±ÙˆØ³...", "info");

                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø¢Ø®Ø± Ø¬Ø³Øª
                const lastGistId = localStorage.getItem('last_gist_id');
                if (lastGistId) {
                    const response = await fetch(`https://api.github.com/gists/${lastGistId}`);
                    if (response.ok) {
                        const gist = await response.json();
                        const content = JSON.parse(gist.files['courses.json'].content);
                        
                        if (content.courses && Array.isArray(content.courses)) {
                            // Ø¯Ù…Ø¬ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                            mergeCourses(content.courses);
                            showNotification("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø­Ø¯Ø«Ø©", "success");
                            return;
                        }
                    }
                }

                // Ø¥Ø°Ø§ ÙØ´Ù„ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                loadLocalCourses();

            } catch (error) {
                console.log('GitHub load failed, using local:', error);
                loadLocalCourses();
            }
        }

        // ==================== Ø¯Ù…Ø¬ Ø§Ù„Ø¯Ø±ÙˆØ³ ====================
        function mergeCourses(newCourses) {
            const localCourses = loadLocalCourses();
            const merged = [...localCourses];
            
            newCourses.forEach(newCourse => {
                const index = merged.findIndex(c => c.id === newCourse.id);
                
                if (index === -1) {
                    // Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯
                    merged.push(newCourse);
                } else {
                    // ØªØ­Ø¯ÙŠØ« Ø¥Ø°Ø§ ÙƒØ§Ù† Ø£Ø­Ø¯Ø«
                    const localDate = new Date(merged[index].updatedAt || 0);
                    const newDate = new Date(newCourse.updatedAt || 0);
                    
                    if (newDate > localDate) {
                        merged[index] = newCourse;
                    }
                }
            });
            
            // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
            courses = merged.sort((a, b) => 
                new Date(b.updatedAt) - new Date(a.updatedAt)
            );
            
            saveLocalCourses();
        }

        // ==================== Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ====================
        function saveLocalCourses() {
            try {
                const data = {
                    courses: courses,
                    timestamp: Date.now()
                };
                localStorage.setItem('2info2_courses', JSON.stringify(data));
            } catch (e) {
                console.error('Local save error:', e);
            }
        }

        function loadLocalCourses() {
            try {
                const saved = localStorage.getItem('2info2_courses');
                if (saved) {
                    const data = JSON.parse(saved);
                    courses = data.courses || [];
                }
            } catch (e) {
                console.error('Local load error:', e);
                courses = [];
            }
            return courses;
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±ÙˆØ³ ====================
        function renderCourses() {
            const container = document.getElementById('coursesContainer');
            const emptyState = document.getElementById('emptyState');
            
            if (courses.length === 0) {
                emptyState.style.display = 'block';
                container.innerHTML = '';
                document.getElementById('totalCourses').textContent = 'Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³: 0';
                return;
            }
            
            emptyState.style.display = 'none';
            document.getElementById('totalCourses').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³: ${courses.length}`;
            
            // ØªØ±ØªÙŠØ¨ Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø« Ù„Ù„Ø£Ù‚Ø¯Ù…
            const sortedCourses = [...courses].sort((a, b) => 
                new Date(b.updatedAt) - new Date(a.updatedAt)
            );
            
            container.innerHTML = sortedCourses.map(course => `
                <div class="course-card" id="course-${course.id}" data-id="${course.id}">
                    ${isAdmin ? `
                        <div class="course-actions">
                            <button class="action-btn edit-btn" onclick="editCourse('${course.id}')" title="ØªØ¹Ø¯ÙŠÙ„">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteCourse('${course.id}')" title="Ø­Ø°Ù">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    ` : ''}
                    
                    <div class="course-header">
                        <h3 class="course-title">${course.title}</h3>
                        <span class="course-time">${course.time}</span>
                    </div>
                    
                    <p class="course-description">${course.description}</p>
                    
                    <div class="course-footer">
                        <span><i class="fas fa-user-tie"></i> ${course.teacher}</span>
                        <span><i class="fas fa-clock"></i> ${formatDate(course.updatedAt)}</span>
                    </div>
                </div>
            `).join('');
        }

        // ==================== ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø±Ø³ ====================
        function editCourse(id) {
            if (!isAdmin) return;
            
            const course = courses.find(c => c.id === id);
            if (!course) return;
            
            currentEditId = id;
            document.getElementById('courseTitle').value = course.title;
            document.getElementById('courseTime').value = course.time;
            document.getElementById('courseDescription').value = course.description;
            document.getElementById('courseTeacher').value = course.teacher;
            
            showNotification("âœï¸ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±Ø³", "info");
        }

        // ==================== Ø­Ø°Ù Ø¯Ø±Ø³ ====================
        async function deleteCourse(id) {
            if (!isAdmin) return;
            
            if (!confirm("âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ØŸ Ø³ÙŠØ­Ø°Ù Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©.")) {
                return;
            }
            
            try {
                courses = courses.filter(course => course.id !== id);
                saveLocalCourses();
                
                // Ø­Ø°Ù Ù…Ù† GitHub
                await saveToGitHub();
                
                renderCourses();
                showNotification("ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯Ø±Ø³ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…", "success");
                updateLastUpdate();
                
            } catch (error) {
                showNotification("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù", "error");
            }
        }

        // ==================== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø¶ÙˆØ± ====================
        function updatePresence() {
            const userId = generateUserId();
            onlineUsers.add(userId);
            document.getElementById('onlineUsers').textContent = onlineUsers.size;
            
            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·ÙŠÙ† Ø¨Ø¹Ø¯ 5 Ø¯Ù‚Ø§Ø¦Ù‚
            setTimeout(() => {
                onlineUsers.delete(userId);
                document.getElementById('onlineUsers').textContent = onlineUsers.size;
            }, 5 * 60 * 1000);
        }

        // ==================== ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« ====================
        function updateLastUpdate() {
            lastUpdateTime = Date.now();
            document.getElementById('lastUpdate').textContent = 
                `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${formatTimeAgo(lastUpdateTime)}`;
        }

        // ==================== Ø¹Ù„Ø§Ù…Ø© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯ ====================
        function markNewCourse(courseId) {
            const courseElement = document.getElementById(`course-${courseId}`);
            if (courseElement) {
                courseElement.classList.add('new');
                setTimeout(() => {
                    courseElement.classList.remove('new');
                }, 3000);
            }
        }

        // ==================== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ====================
        function clearForm() {
            currentEditId = null;
            document.getElementById('courseTitle').value = '';
            document.getElementById('courseTime').value = '';
            document.getElementById('courseDescription').value = '';
            document.getElementById('courseTeacher').value = 'Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('ar-EG', {
                hour: '2-digit',
                minute: '2-digit',
                day: '2-digit',
                month: '2-digit'
            });
        }

        function formatTimeAgo(timestamp) {
            const diff = Date.now() - timestamp;
            const minutes = Math.floor(diff / 60000);
            
            if (minutes < 1) return 'Ø§Ù„Ø¢Ù†';
            if (minutes < 60) return `Ù‚Ø¨Ù„ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
            
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `Ù‚Ø¨Ù„ ${hours} Ø³Ø§Ø¹Ø©`;
            
            return new Date(timestamp).toLocaleString('ar-EG', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            // Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            const colors = {
                success: '#28a745',
                error: '#dc3545',
                warning: '#ffc107',
                info: '#17a2b8'
            };
            notification.style.borderRightColor = colors[type] || '#1e3c72';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.addEventListener('DOMContentLoaded', async function() {
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
            loadLocalCourses();
            renderCourses();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø¶ÙˆØ±
            updatePresence();
            updateLastUpdate();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³ Ù…Ù† Ø§Ù„Ø³Ø­Ø§Ø¨Ø©
            await loadFromGitHub();
            renderCourses();
            
            // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
            setInterval(async () => {
                await loadFromGitHub();
                renderCourses();
                updatePresence();
                updateLastUpdate();
            }, SYSTEM_CONFIG.UPDATE_INTERVAL);
            
            // Ø§Ø³ØªÙ…Ø¹ Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ù† Ù†ÙˆØ§ÙØ° Ø£Ø®Ø±Ù‰
            window.addEventListener('storage', (e) => {
                if (e.key === '2info2_courses') {
                    loadLocalCourses();
                    renderCourses();
                    showNotification("ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯Ø±ÙˆØ³", "info");
                }
            });
            
            // ØªÙ„Ù…ÙŠØ­ Ø£ÙˆÙ„ÙŠ
            if (!localStorage.getItem('welcome_shown')) {
                setTimeout(() => {
                    showNotification("ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£ÙŠ ØªØºÙŠÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠØ± ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹ ÙÙˆØ±Ø§Ù‹", "info");
                    localStorage.setItem('welcome_shown', 'true');
                }, 2000);
            }
        });
    </script>
</body>
</html>
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header h1 span {
            color: #667eea;
            font-size: 3rem;
        }

        .header p {
            color: #666;
            font-size: 1.2rem;
        }

        .admin-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px dashed #667eea;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
        }

        .course-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid transparent;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .course-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .course-title {
            font-size: 1.4rem;
            color: #333;
        }

        .course-time {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .course-description {
            color: #666;
            line-height: 1.6;
        }

        .course-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
        }

        .edit-btn { background: #28a745; color: white; }
        .delete-btn { background: #dc3545; color: white; }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #666;
        }

        .empty-state i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 20px;
        }

        .sync-status {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header h1 span {
                font-size: 2.5rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span>2</span> Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ 2 - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø´ØªØ±Ùƒ</h1>
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ØªØ¸Ù‡Ø± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©</p>
        </div>

        <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© -->
        <div class="sync-status" id="syncStatus">
            <i class="fas fa-sync-alt"></i> ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± -->
        <div class="admin-panel" id="adminPanel" style="display: none;">
            <h3 style="color: #667eea; margin-bottom: 20px;">
                <i class="fas fa-cogs"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ù…Ø¯ÙŠØ±
            </h3>
            
            <div class="form-group">
                <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³</label>
                <input type="text" id="courseTitle" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³">
            </div>
            
            <div class="form-group">
                <label>ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø³</label>
                <input type="text" id="courseTime" class="form-control" placeholder="Ù…Ø«Ø§Ù„: 8:00 - 10:00">
            </div>
            
            <div class="form-group">
                <label>ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³</label>
                <textarea id="courseDescription" class="form-control" rows="3" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙØ§Ù‹ Ù…Ø®ØªØµØ±Ø§Ù‹ Ù„Ù„Ø¯Ø±Ø³"></textarea>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" onclick="addCourse()">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³
                </button>
                <button class="btn btn-danger" onclick="logoutAdmin()">
                    <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </div>

        <!-- Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± -->
        <div style="text-align: center; margin-bottom: 30px;">
            <button class="btn" id="adminBtn" onclick="loginAdmin()">
                <i class="fas fa-user-shield"></i> Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ù„Ù„Ù†Ø¸Ø§Ù…
            </button>
        </div>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ -->
        <div id="coursesList">
            <!-- Ø§Ù„Ø¯Ø±ÙˆØ³ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
        </div>

        <!-- Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <i class="fas fa-book-open"></i>
            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
            <p>Ù‚Ù… Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ù„Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ø¯Ø±Ø³</p>
        </div>
    </div>

    <script>
        // ==================== Ù†Ø¸Ø§Ù… ØªØ®Ø²ÙŠÙ† Ø°ÙƒÙŠ ====================
        // ÙŠØ³ØªØ®Ø¯Ù… GitHub Gist ÙƒÙ…Ø®Ø²Ù† Ù…Ø±ÙƒØ²ÙŠ (Ù…Ø¬Ø§Ù†ÙŠ ÙˆÙ„Ø§ ÙŠØ­ØªØ§Ø¬ ØªØ³Ø¬ÙŠÙ„)
        const GIST_ID = '45d9f7b5c1e8d3f2a1b6'; // Ù‡Ø°Ø§ Ù…Ø¹Ø±Ù Ø¬Ø³Øª Ø¹Ø§Ù… ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡
        
        let courses = [];
        let isAdmin = false;

        // ==================== Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± ====================
        function loginAdmin() {
            const password = prompt("ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯ÙŠØ±:");
            if (password === "admin123") {
                isAdmin = true;
                document.getElementById('adminPanel').style.display = 'block';
                document.getElementById('adminBtn').style.display = 'none';
                showSyncStatus("âœ… ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± - ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³");
                
                // ØªØ­Ù…ÙŠÙ„ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                loadCourses();
            } else {
                alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!");
            }
        }

        function logoutAdmin() {
            isAdmin = false;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminBtn').style.display = 'block';
            showSyncStatus("ğŸ”“ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ±");
        }

        // ==================== Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯ ====================
        async function addCourse() {
            const title = document.getElementById('courseTitle').value.trim();
            const time = document.getElementById('courseTime').value.trim();
            const description = document.getElementById('courseDescription').value.trim();
            
            if (!title || !time || !description) {
                alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„!");
                return;
            }
            
            const newCourse = {
                id: Date.now(),
                title: title,
                time: time,
                description: description,
                subject: "Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ",
                teacher: "Ø£Ø³ØªØ§Ø° Ø§Ù„Ù…Ø§Ø¯Ø©",
                date: new Date().toLocaleString('ar-EG'),
                addedBy: "Ø§Ù„Ù…Ø¯ÙŠØ±"
            };
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ÙŠØ§Ù‹
            courses.push(newCourse);
            renderCourses();
            
            // Ø­ÙØ¸ Ø¹Ù„Ù‰ GitHub Gist
            const saved = await saveToCloud(newCourse);
            
            if (saved) {
                showSyncStatus("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³ ÙˆØ³ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù");
                // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
                document.getElementById('courseTitle').value = '';
                document.getElementById('courseTime').value = '';
                document.getElementById('courseDescription').value = '';
            } else {
                showSyncStatus("âš ï¸ ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø· - ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
            }
        }

        // ==================== Ø­ÙØ¸ Ø¹Ù„Ù‰ GitHub Gist ====================
        async function saveToCloud(course) {
            try {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø¬Ø³Øª
                const response = await fetch(`https://api.github.com/gists/${GIST_ID}`);
                const gist = await response.json();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const content = JSON.parse(gist.files['courses.json'].content);
                content.courses.push(course);
                
                // Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                await fetch(`https://api.github.com/gists/${GIST_ID}`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        files: {
                            'courses.json': {
                                content: JSON.stringify(content, null, 2)
                            }
                        }
                    })
                });
                
                return true;
            } catch (error) {
                console.error('Error saving to cloud:', error);
                return false;
            }
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³ ====================
        async function loadCourses() {
            try {
                showSyncStatus("ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¯Ø±ÙˆØ³...");
                
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ø³Ø­Ø§Ø¨Ø©
                const response = await fetch(`https://api.github.com/gists/${GIST_ID}`);
                const gist = await response.json();
                const content = JSON.parse(gist.files['courses.json'].content);
                
                courses = content.courses || [];
                renderCourses();
                showSyncStatus("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¯Ø±ÙˆØ³");
                
                // Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ Ù„Ù„Ø¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„
                localStorage.setItem('courses_backup', JSON.stringify(courses));
                
            } catch (error) {
                console.log('Using local backup:', error);
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
                const backup = localStorage.getItem('courses_backup');
                if (backup) {
                    courses = JSON.parse(backup);
                    renderCourses();
                    showSyncStatus("âš ï¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ© - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ");
                }
            }
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±ÙˆØ³ ====================
        function renderCourses() {
            const container = document.getElementById('coursesList');
            const emptyState = document.getElementById('emptyState');
            
            if (courses.length === 0) {
                emptyState.style.display = 'block';
                container.innerHTML = '';
                return;
            }
            
            emptyState.style.display = 'none';
            container.innerHTML = '';
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯Ø±ÙˆØ³ Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø« Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù‚Ø¯Ù…
            const sortedCourses = [...courses].sort((a, b) => b.id - a.id);
            
            sortedCourses.forEach(course => {
                const card = document.createElement('div');
                card.className = 'course-card';
                card.innerHTML = `
                    <div class="course-header">
                        <h3 class="course-title">${course.title}</h3>
                        <span class="course-time">${course.time}</span>
                    </div>
                    <p class="course-description">${course.description}</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 15px; font-size: 0.9rem; color: #666;">
                        <span><i class="fas fa-user"></i> ${course.teacher}</span>
                        <span><i class="fas fa-calendar"></i> ${course.date}</span>
                    </div>
                    ${isAdmin ? `
                        <div class="course-actions">
                            <button class="action-btn edit-btn" onclick="editCourse(${course.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteCourse(${course.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    ` : ''}
                `;
                container.appendChild(card);
            });
        }

        // ==================== Ø­Ø°Ù Ø¯Ø±Ø³ ====================
        async function deleteCourse(courseId) {
            if (!isAdmin) return;
            
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ØŸ")) {
                courses = courses.filter(course => course.id !== courseId);
                renderCourses();
                
                try {
                    // ØªØ­Ø¯ÙŠØ« Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©
                    const response = await fetch(`https://api.github.com/gists/${GIST_ID}`);
                    const gist = await response.json();
                    const content = JSON.parse(gist.files['courses.json'].content);
                    content.courses = content.courses.filter(c => c.id !== courseId);
                    
                    await fetch(`https://api.github.com/gists/${GIST_ID}`, {
                        method: 'PATCH',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            files: {
                                'courses.json': {
                                    content: JSON.stringify(content, null, 2)
                                }
                            }
                        })
                    });
                    
                    showSyncStatus("âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯Ø±Ø³");
                } catch (error) {
                    showSyncStatus("âš ï¸ ØªÙ… Ø§Ù„Ø­Ø°Ù Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø·");
                }
            }
        }

        // ==================== ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø±Ø³ ====================
        function editCourse(courseId) {
            if (!isAdmin) return;
            
            const course = courses.find(c => c.id === courseId);
            if (!course) return;
            
            document.getElementById('courseTitle').value = course.title;
            document.getElementById('courseTime').value = course.time;
            document.getElementById('courseDescription').value = course.description;
            
            // Ø­Ø°Ù Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯
            courses = courses.filter(c => c.id !== courseId);
            
            showSyncStatus("âœï¸ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ù… Ø­ÙØ¸Ù‡Ø§");
        }

        // ==================== Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ====================
        function showSyncStatus(message) {
            const status = document.getElementById('syncStatus');
            status.innerHTML = `<i class="fas fa-sync-alt"></i> ${message}`;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 5000);
        }

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³ ÙÙˆØ± ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
            loadCourses();
            
            // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
            setInterval(loadCourses, 30000);
            
            // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
            window.addEventListener('online', () => {
                loadCourses();
                showSyncStatus("ğŸŒ ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ - ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©");
            });
            
            window.addEventListener('offline', () => {
                showSyncStatus("ğŸ”Œ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø§ØªØµØ§Ù„ - Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©");
            });
        });

        // ==================== Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ====================
        // Ø¹Ù†Ø¯ Ø£ÙˆÙ„ ØªØ´ØºÙŠÙ„ ÙÙ‚Ø·
        if (!localStorage.getItem('initialized')) {
            courses = [
                {
                    id: 1,
                    title: "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©",
                    time: "8:00 - 10:00",
                    description: "ØªØ¹Ù„Ù… Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª",
                    subject: "Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ",
                    teacher: "Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯",
                    date: new Date().toLocaleString('ar-EG'),
                    addedBy: "Ø§Ù„Ù†Ø¸Ø§Ù…"
                },
                {
                    id: 2,
                    title: "Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
                    time: "10:15 - 12:15",
                    description: "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù€ SQL",
                    subject: "Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ",
                    teacher: "Ø§Ù„Ø£Ø³ØªØ§Ø° Ø£Ø­Ù…Ø¯",
                    date: new Date().toLocaleString('ar-EG'),
                    addedBy: "Ø§Ù„Ù†Ø¸Ø§Ù…"
                }
            ];
            
            localStorage.setItem('courses_backup', JSON.stringify(courses));
            localStorage.setItem('initialized', 'true');
            renderCourses();
        }
    </script>
</body>
</html>

